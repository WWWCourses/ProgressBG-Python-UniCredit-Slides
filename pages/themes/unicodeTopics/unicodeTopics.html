<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>unicodeTopics</title>
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
	<!-- css & themes include -->
	<link rel="stylesheet" href="/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/css/reveal.css">
	<link rel="stylesheet" href="/ProgressBG-Python-UniCredit-Slides/outfit/css/themes/dark.css" id="theme">
	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement( 'link' );
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match( /print-pdf/gi ) ? '/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/css/print/pdf.css' : '/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/css/print/paper.css';
		document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>
	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
	<!-- CUSTOM -->
	<base target="_blank">
</head>
<body>
	<div class="reveal default center" data-transition-speed="default" data-background-transition="default">
		<div class="top_links">
			<a class="home_link" href="/ProgressBG-Python-UniCredit-Slides/pages/agenda/agenda.html#unicodeTopics" target="_top"><i class="fa fa-home"></i></a>
			<span class="help_link" href="#"><i class="fa fa-question"></i></span>
			<div class="help_text">
        <div><span>N/Space</span><span>next slide</span></div>
        <div><span>P</span><span>previous slide</span></div>
        <div><span>O</span><span>overview slides</span></div>
        <div><span>ctrl+left click</span><span>zoom element</span></div>
      </div>
		</div>
		<div class="footer theme_switch">
			<a href="#" onclick="document.getElementById('theme').setAttribute('href','/ProgressBG-Python-UniCredit-Slides/outfit/css/themes/dark.css'); return false;">Dark</a>
			<a href="#" onclick="document.getElementById('theme').setAttribute('href','/ProgressBG-Python-UniCredit-Slides/outfit/css/themes/light.css'); return false;">Light</a>
			<a href="#" onclick="document.getElementById('theme').setAttribute('href','/ProgressBG-Python-UniCredit-Slides/outfit/css/themes/projector.css'); return false;">Projector</a>
		</div>
		<div class="slides">
<!--
########################################################
##################### SLIDES START #####################
########################################################
-->
<section data-background-image="images/babel_tower_by_Kircher.jpg" data-background-size="100% 100%">
	<a href="https://en.wikipedia.org/wiki/Tower_of_Babel#/media/File:Turris_Babel_by_Athanasius_Kircher.jpg">
	<h1 style="font-size:3em;color:#F1F1C8; letter-spacing: .1em; text-shadow: 1px 1px #362525, 2px 2px #362525">Unicode in Python</h1></a></section>
<section data-transition="zoom">
	<!-- linkedin badge -->
	<!--<script type="text/javascript" src="https://platform.linkedin.com/badges/js/profile.js" async defer></script>-->
	<section class="copyright" data-transition="zoom">
		<div class="note">
			<p>Created for</p>
		</div>
		<div class="company">
			<a href="http://progressbg.net/–ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ-—Å-python-2/">
			<img style="height:80%" src="/ProgressBG-Python-UniCredit-Slides/outfit/images/logos/ProgressBG_logo_529_127.png">
			</a>
		</div>
		<div class="author">
			<span class="note">Iva E. Popova, 2021,</span>
			<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
		</div>
	</section>
	<section class="copyright" data-transition="zoom" style="margin-top: -2em;">
		<div class="company">
			 <div class="LI-profile-badge"  data-version="v1" data-size="large" data-locale="en_US" data-type="vertical" data-theme="dark" data-vanity="ivapopova"><a class="LI-simple-link" href='https://bg.linkedin.com/in/ivapopova?trk=profile-badge'>Iva E. Popova on LinkedIn</a></div>
		</div>
	</section>
</section>


<section><h1>Unicode Overview</h1></section>
<section><h2>Unicode Overview</h2>
	<section ><h3>The problem</h3>
		<dl class="fa">
			<dt>In the beginning (1963), there was only <a href="https://www.asciitable.com/">ASCII</a>. After that, a bunch of character encodings was used:</dt>
			<dd><a href="https://en.wikipedia.org/wiki/Windows-1252">Windows-1252</a></dd>
			<dd><a href="https://en.wikipedia.org/wiki/KOI8-R">KOI8-R</a></dd>
			<dd><a href="https://en.wikipedia.org/wiki/Windows-1251">Windows-1251</a></dd>
			<dd><a href="https://en.wikipedia.org/wiki/Character_encoding#Common_character_encodings">many, many others...</a></dd>
			<dt>And the mess begins...</dt>
			<dd>in KOI8-R, the code '209' == '—è'</dd>
			<dd>in Windows-1251, the code '209' == '–°'</dd>
			<dd>in Windows-1252, the code '209' == '√ë'</dd>
		</dl>
	</section>
	<section><h3>Unicode - The Solution</h3>
		<dl class="fa">
			<dt>Unicode encompasses virtually all characters used widely in computers today. As of version 11.0, Unicode contains a repertoire of over 137,000 characters covering 146 modern and historic scripts, as well as multiple symbol sets. Even <a href="https://en.wikipedia.org/wiki/Emoji#Unicode_blocks">Emoji</a>!</dt>
			<dt><a href="https://en.wikipedia.org/wiki/List_of_Unicode_characters">List of Unicode characters</a> @wikipedia</dt>
		</dl>
	</section>
	<section>
		<div style="position: relative;">
			<div style="font-size: 11em;letter-spacing:0em; color: #E2C7C7; position: absolute; top:-0.2em; left:0; right: 0;"><span>‚òï</span></div>
			<div style="font-size: 3em;letter-spacing:3em; color: #C7C7E2; position:absolute; top:2em;left: 0; right: 0;">
				<span>a</span><span>ƒÉ</span><span>—è</span>
			</div>
			<div style="font-size: 4em;letter-spacing:.9em; color: #C7E2C7; position: absolute; top:3em; left:.3em; right: 0;"><span>‡¶õ</span>ùÑû</div>
	</div>
	</section>
	<section><h3>Encoding</h3>
		<dl class="fa">
			<dt>A Unicode string is a sequence of code points, which are numbers from 0 through 0x10FFFF (1,114,111 decimal)</dt>
			<dt>This sequence needs to be represented as a set of bytes (1 byte can store values from 0 to (2**8)-1) in memory</dt>
			<dt class="note">The rules for translating a Unicode string into a sequence of bytes are called an <b>encoding</b></dt>
			<dt><a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a> is a variable width character encoding capable of encoding all valid code points in Unicode using one to four 8-bit bytes</dt>
			<dd>It's the most popular encoding, used in contemporary software systems.</dd>
		</dl>
	</section>
</section>

<section><h1>Python‚Äôs Unicode Support</h1></section>
<section><h2>Python‚Äôs Unicode Support</h2>
	<section>
		<p style="font-size: 2em" class="note">Python3 represents strings in Unicode</p>
		<p style="font-size: 1.8em">The default encoding for Python3 source code is <span class="note">UTF-8</span></p>
	</section>
	<section>
		<p>Python 3 also supports Unicode characters in identifiers</p>
		<pre><code rel="Python" class="python">
			–Ω–∏–∑ = "This is a normal Python string :‡¶õ ùÑû ‚òï"
			print(–Ω–∏–∑)
			# This is a normal Python string :‡¶õ ùÑû ‚òï
		</code></pre>
	</section>
	<section><h3><code>ord()</code> and <code>chr()</code> functions</h3>
		<dl class="fa">
			<dt><code><a href="https://docs.python.org/3/library/functions.html#ord">ord(char)</a></code> - return an integer representing the Unicode code point of <em>char</em> given.</dt>
			<dt><code><a href="https://docs.python.org/3/library/functions.html#chr">chr(i)</a></code> - return the string representing a character whose Unicode code point is the integer i</dt>
		</dl>
		<pre><code rel="Python" class="python">
			print( ord('—è') )
			# 1103
			print( chr(1103) )
			# —è
		</code></pre>
	</section>
	<section><h3>Unicode symbols in Python strings</h3>
		<dl class="fa">
			<dt>You can use the unicode symbols directly in strings, or, you can enter them using escape sequences</dt>
			<dt>Example - Various ways to represent symbol <a href="https://unicode-table.com/en/0462/">Cyrillic Capital Letter Yat</a></dt>
		</dl>
		<pre><code rel="Python" class="python">
			# Unicode symbol in string:
			print("—¢")

			# Using the character name:
			print("\N{Cyrillic Capital Letter Yat}")

			# Using a 16-bit hex value code point:
			print("\u0462")

			# Using a 32-bit hex value code point:
			print("\U00000462")
		</code></pre>
	</section>
</section>

<section><h1>Encode-Decode</h1></section>
<section id="encode-decode-flow"><h2>Encode-Decode Flow</h2>
	<section>
		<!-- <dl class="fa">
			<dt>In byte streams, we have <b>only bytes</b>, but we can interpret them, i.e. to decode, as characters using  some character table</dt>

		</dl> -->
		<a href="images/Python_encode_decode.png"><img src="images/Python_encode_decode.png"></a>
	</section>
</section>

<section><h1>encode() - convert String to Bytes</h1></section>
<section><h2>convert String to Bytes</h2>
	<section><h3><code>str.encode()</code> - syntax</h3>
		<pre><code rel="Syntax" class="shell" data-noescape>
			str.encode(encoding="utf-8", errors="strict")
		</code></pre>
		<dl class="fa">
			<dt>Return an encoded version of the string as a bytes object</dt>
			<dt>Default encoding is 'utf-8'</dt>
			<dt>List of possible encodings: <a href="https://docs.python.org/3/library/codecs.html#standard-encodings">Standard Encodings</a></dt>
			<dt>The default for errors is 'strict', meaning that encoding errors raise a UnicodeError.</dt>
			<dt>More on str.encode(): <a href="https://docs.python.org/3/library/stdtypes.html#str.encode">str.encode @python3 docs</a></dt>
		</dl>
	</section>
	<section><h3><code>str.encode()</code> - example</h3>
		<pre><code rel="Python" class="python">
			string = &quot;123–∞–±–≤&quot;

			str_in_utf = string.encode()

			print(&quot;Byte object:&quot;, str_in_utf)
			print(&quot;Type: &quot;,type(str_in_utf) )
			print(&quot;Length:&quot;,len(str_in_utf) )

			#Byte object: b'123\xd0\xb0\xd0\xb1\xd0\xb2'
			#Type:  &lt;class 'bytes'&gt;
			#Length: 9
		</code></pre>
		<p class="note">Note, that the len() of byte object returns the number of bytes, not the number of characters encoded!</p>
	</section>
	<section><h3>The <code>bytes</code> Object and <code>bytestring</code></h3>
		<dl class="fa">
			<dt>The <code>bytes</code> object represents an immutable sequence of integers in the range 0 <= x < 256.</dt>
			<dt>A bytestring is a raw stream of bytes which can be read/write directly into/from memory.</dt>
			<dt><b><code>bytestring</code> vs <code>str</code> in Python3</b></dt>
			<dd style="font-size: .8em">a <code class="note">bytestring</code> represents an immutable sequence of bytes, without implying any particular interpretation</dd>
			<dd style="font-size: .8em"><code class="note">str</code> represents an immutable sequence of unicode codepoints,without implying any particular binary encoding</dd>
			<dt>More on bytes objects: <a href="https://en.wikiversity.org/wiki/Python_Concepts/Bytes_objects_and_Bytearrays">Bytes objects and Bytearrays</a></dt>
		</dl>
	</section>
</section>

<section><h1>decode() - convert Bytes to String</h1></section>
<section><h2>convert Bytes to String</h2>
	<section><h3><code>bytes.decode()</code> - syntax</h3>
		<pre><code rel="Syntax" class="shell" data-noescape>
			bytes.decode(encoding="utf-8", errors="strict")
		</code></pre>
		<dl class="fa">
			<dt>Return a string decoded from the given bytes</dt>
			<dt>Default encoding is 'utf-8'</dt>
			<dt>List of possible encodings: <a href="https://docs.python.org/3/library/codecs.html#standard-encodings">Standard Encodings</a></dt>
			<dt>The default for errors is 'strict', meaning that encoding errors raise a UnicodeError.</dt>
			<dt>More on bytes.decode(): <a href="https://docs.python.org/3/library/stdtypes.html#bytes.decode">bytes.decode @python3 docs</a></dt>
			<dt>More on bytes objects: <a href="https://en.wikiversity.org/wiki/Python_Concepts/Bytes_objects_and_Bytearrays">Bytes objects and Bytearrays</a></dt>
		</dl>
	</section>
	<section><h3><code>bytes.decode()</code> - example</h3>
		<pre><code rel="Python" class="python">
			str_in_bytes =  b'123\xd0\xb0\xd0\xb1\xd0\xb2'
			str_in_utf8 = str_in_bytes.decode()

			print("String object:", str_in_utf8)
			print("Type: ",type(str_in_utf8) )
			print("Length:",len(str_in_utf8) )

			String object: 123–∞–±–≤
			Type:  <class 'str'>
			Length: 6
		</code></pre>
		<p class="note">Note, that the len() of string object returns the number of characters, not the number of bytes decoded!</p>
	</section>
</section>

<section><h1>Example use-cases</h1></section>
<section><h2>Example use-cases</h2>
	<section><h3>encode/write examples</h3>
		<dl class="fa">
			<dt>Next two examples achieve a same goal - to save a Python string into text file, encoded as 'cp1251'</dt>
			<dt>Thought, the write() method is conciser and clearer, I'm showing the encode() method, as well, as it could be used in other use-cases.</dt>
		</dl>
	</section>
	<section><h3>Write a Python string into file, encoded to cp1251 bytes - using <code>str.encode()</code></h3>
		<pre><code rel="encode_to_cp1251.py" class="python">
			string = "–ê–ë–í 123 –ò–ô–ö –©–Æ–Ø"

			# open a file handler for writing in binary mode"
			with open("encode_to_cp1251.txt", "w+b") as fh:
			  bytes_sequence = string.encode(encoding="cp1251")
			  fh.write(bytes_sequence)

			# now re-open the file: encode_to_cp1251.txt with encoding cp1251(windows-1251)
		</code></pre>
		<p>Usually, for such task, you would like to use the open() in text mode with encoding option, as given in next slide</p>
	</section>
	<section><h3>Write a Python string into file, encoded to cp1251 bytes - using <code>open(filename, mode, encoding)</code></h3>
		<pre><code rel="write_to_cp1251.py" class="python">
			string = "–ê–ë–í 123 –ò–ô–ö –©–Æ–Ø"

			# open a file for writing in text mode, with encoding="cp1251" "
			with open("write_to_cp1251.txt", "w+", encoding="cp1251") as fh:
			  fh.write(string)

			# now re-open the file: write_to_cp1251.txt with encoding cp1251(windows-1251)
		</code></pre>
	</section>

	<section><h3>decode/read examples</h3>
		<dl class="fa">
			<dt>Next two examples achieve a same goal - to read from text file, encoded as 'cp1251'</dt>
			<dt>Thought, the read() method is conciser and clearer, I'm showing the decode() method, as well, as it could be used in other use-cases.</dt>
		</dl>
	</section>
	<section><h3>Read a cp1251 encoded file into Python string - using <code>str.decode()</code></h3>
		<pre><code rel="decode_from_windows-1251.py" class="python">
			win1251file = "encode_to_cp1251.txt"

			# open a file handler for reading in binary mode"
			with open(win1251file, "r+b") as f:
			    bytestring = f.read()

			    decoded_string = bytestring.decode(encoding="cp1251")
			    print(decoded_string)

			    # –ê–ë–í 123 –ò–ô–ö –©–Æ–Ø
		</code></pre>
	</section>
	<section><h3>Read a cp1251 encoded file into Python string - using <code>open(filename, mode, encoding)</code></h3>
		<pre><code rel="read_from_windows-1251.py" class="python">
			win1251file = "write_to_cp1251.txt"

			# open a file handler for reading in text mode, with encoding="cp1251""
			with open(win1251file, "r", encoding="cp1251") as f:
			    print(f.read())
		</code></pre>
	</section>
	<section><h3>base64.b64encode demo</h3>
		<p><a href="https://docs.python.org/3/library/base64.html#base64.b64encode">base64.b64encode</a></p>
		<pre><code rel="Python3" class="python">
			import base64

			passwd = 'abracadabra'

			# base64 needs a byte string
			# encoded = base64.b64encode(b'data to be encoded')

			passwd_bytes = passwd.encode()
			passwd_b64 = base64.b64encode(passwd_bytes)

			print(f'passwd_b64: {passwd_b64}')
			# passwd_b64: b'YWJyYWNhZGFicmE='
		</code></pre>
	</section>
</section>

<!-- <section><h1>___MainSectionTitle___</h1></section>
<section><h2>___MainSectionTitle___</h2>
	<section><h3>___MainSectionSubTitle___</h3></section>
</section>
 -->
<section><h1>Resources</h1></section>
<section><h2>Resources</h2>
	<section><h3>Texts</h3>
		<dl class="fa">
			<dt><a href="https://nedbatchelder.com/text/unipain.html">Pragmatic Unicode</a> by Ned Batchelder</dt>
			<dt><a href="https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a></dt>
			<dt><a href="https://docs.python.org/3.3/howto/unicode.html">Unicode HOWTO @python docs</a></dt>
		</dl>
	</section>
</section>


<section id="hw"><h1>Exercises</h1></section>
<section id="guess_the_quotes"><h2>Task1: guess_the_quotes</h2>
	<section><h3>The Task</h3>
		<dl class="fa">
			<dt>Given is next file: <a href="Task_and_HW/guess_the_quotes/quotes.txt">quotes.txt</a>, containing quotes in Cyrillic, from a famous writer. But, the file is encoded in <a href="https://en.wikipedia.org/wiki/KOI8-R">KOI8-R</a></dt>
			<dt>Write a Python program, that will convert that file into Unicode, using the UTF8 encoding.</dt>
			<dt>Now, you'll be able to open and read the text with your favourite editor</dt>
		</dl>
	</section>
</section>
<section id="cp1251_to_utf8"><h2>Task2: cp1251_to_utf8</h2>
	<section><h3>The Task</h3>
		<dl class="fa">
			<dt>Imagine, you've downloaded a Bulgarian subtitles file, encoded in Windows-1251: <a href="Task_and_HW/cyr_subs_to_UTF/Silicon.Valley.sampleBGsubs.srt">Silicon.Valley.sampleBGsubs.srt</a></dt>
			<dt>But you have to convert it in UTF8, as your player recognise only Unicode encoded subtitles</dt>
			<dt> Write a program: <code>cp1251_to_utf8.py</code>, which will receive an input file name as argument and will create an UTF encoded file with the same name, but with sufix "_utf8_" added.</dt>
		</dl>
	</section>
	<section><h3>Program usage example</h3>
		<pre><code rel="Terminal - Files before conversion" class="bash" data-noescape>
			.
			‚îú‚îÄ‚îÄ cp1251_to_utf8.py
			‚îî‚îÄ‚îÄ Silicon.Valley.sampleBGsubs.srt
		</code></pre>
		<pre><code rel="Terminal - run cp1251_to_utf8.py" class="bash" data-noescape>
			$ python cp1251_to_utf8.py Silicon.Valley.sampleBGsubs.srt
		</code></pre>
		<pre><code rel="Terminal - Files after conversion" class="bash" data-noescape>
			.
			‚îú‚îÄ‚îÄ cp1251_to_utf8.py
			‚îú‚îÄ‚îÄ Silicon.Valley.sampleBGsubs.srt
			‚îî‚îÄ‚îÄ Silicon.Valley.sampleBGsubs_utf8_.srt
		</code></pre>
		<p>Make sure, that Silicon.Valley.sampleBGsubs_utf8_.srt is properly converted and readable!</p>
	</section>
</section>


<section><h3>Submission</h3>
	<dl class="fa">
		<dt>Please, prefix your filenames/archive with your name initials, before sending.</dt>
		<dd>For instance: <b>iep_task1.py</b> or <b>iep_tasks.rar</b></dd>
		<dt>Send files to <a href="mailto:progressbg.python.course@gmail.com?Subject=HW: unicodeTopics">progressbg.python.course@gmail.com</a></dt>
	</dl>
</section>



<section class="disclaimer" data-background="/ProgressBG-Python-UniCredit-Slides/outfit/images/for_slides/the_end_on_sand.jpg">
	 <p>These slides are based on</p>
	 <p>customised version of </p>
	 <p><a href="http://hakim.se/">Hakimel</a>'s <a href="http://lab.hakim.se/reveal-js">reveal.js</a></p>
	 <p>framework</p>
</section>
<!--
########################################################
##################### SLIDES END   #####################
########################################################
-->
		</div>
	</div>
	<!-- Custom processing -->
	<script src="/ProgressBG-Python-UniCredit-Slides/outfit/js/slides.js"></script>
	<!-- external scripts -->
	<script src="/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/lib/js/head.min.js"></script>
	<script src="/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/js/reveal.js"></script>
	 <!-- init reveal -->
	<script>
		// Full list of configuration options available at:
		// https://github.com/hakimel/reveal.js#configuration
		var highlightjsTabSize = '  ';
		Reveal.initialize({
			controls: true,
			progress: true,
			slideNumber: 'c/t',
			keyboard: true,
			history: true,
			center: true,
			width: 1920,
			height: 1280,
			// Bounds for smallest/largest possible scale to apply to content
			// minScale: .5,
			maxScale: 1,
			// slide transition
			transition: 'concave', // none/fade/slide/convex/concave/zoom
			// Factor of the display size that should remain empty around the content
			margin: 0.1,
			// shift+maous click to zoom in/out element
			zoomKey: 'ctrl',
			// theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
			// transition: Reveal.getQueryHash().transition || 'default'
			// Optional reveal.js plugins
			dependencies: [
				{ src: '/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
				{ src: '/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: '/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: '/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.configure({tabReplace: highlightjsTabSize}); hljs.initHighlightingOnLoad(); } },
				{ src: '/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/plugin/zoom-js/zoom.js', async: true },
				{ src: '/ProgressBG-Python-UniCredit-Slides/lib/reveal.js/plugin/notes/notes.js', async: true }
			]
		});
	</script>
</body>
</html>
